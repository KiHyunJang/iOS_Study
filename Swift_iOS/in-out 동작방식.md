# in - out 동작 방식
  
Swift에서 함수의 파라미터는 상수(Constant)이므로 함수 내부에서 파라미터의 값을 변경할 수 없다. 이는 우리가 파라미터를 실수로라도 변경할 수 없다는 뜻이기도 하다. 만약 함수에서 파라미터의 값을 변경하고, 변경된 값이 함수 호출이 종료된 후에도 지속되길 원한다면 inout 파라미터를 사용하면 된다.  
ex)  
```Swift
func numAddOne(_ num : inout Int) {
    num += 1
}

var a: Int = 10
numAddOne(&a)
// a = 11 
```
  
## in - out의 원리
1. 함수가 호출되면, 매개변수로 넘겨진 변수 복사.  
2. 함수 코드 블럭내에서 복사한 값 수정.  
3. 함수가 반환될 때, 수정된 값을 원본 변수에 재할당.  
copy - in - copy - out 또는 call by value result라고 부르며 inout는 전자의 줄임말이다.  

## in - out 최적화
swift는 in-out 파라미터에 대한 최적화를 위해 값을 복사하지 않고, 값이 저장된 메모리 주소 값을 함수 내,외부에서 사용한다.  
이 최적화는 call by value result라고 부른다.  
이를 통해 복사로 인한 오버헤드를 줄일 수 있다.  

## 주의할 점
in - out를 사용할 때 메모리 접근에 주의해아한다.  
최적화를 위해 메모리 주소를 참조하기 때문에 읽기, 쓰기가 동시에 이루어지는 상황에서는 충돌이 발생할 수 있다.  
만약, 값을 캡쳐해서 변경시키길 원한다면 copy - in - copy - out을 직접 구현해야한다.  
클로저에서도 inout을 적용할 수 있는데, 이 경우 클로저는 반드시 non-escaping이여야 한다. 값을 변화시켜야 한다면, 캡쳐를 해야한다. 다만 캡쳐는 상수기 때문에 이 경우도 copy-in copy-out을 직접 구현해야 한다.
